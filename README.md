#Magisky Tool

Magisky Tool — это многофункциональный инструмент на Python, предназначенный для автоматизации различных задач, таких как:
	•	Сбор информации о локальных и доменных пользователях (dump)
	•	Запуск стресс-тестов (повторное выполнение команд)
	•	Работа с Telegram-аккаунтами и Telegram-клиентом (авторизация, боты, команды)
	•	SSH-клиент для удалённого управления
	•	Сканирование популярных и всех доступных портов (nmap)
	•	И другие функции

Проект изначально ориентирован на Windows-среду (из-за использования системных команд net user, net users /domain и т.д.), однако его части (например, SSH, Telegram) могут работать и в других ОС.

Содержание
	1.	Особенности
	2.	Зависимости
	3.	Установка и запуск
	4.	Использование
	5.	Описание функций
	6.	Telegram: Менеджер аккаунтов и алгоритмов
	7.	Ограничения
	8.	Пример структуры проекта
	9.	Лицензия

Особенности
	•	Работа с локальными/доменными пользователями. Автоматический запуск команд net user и сохранение результатов в файлы.
	•	Telegram-утилиты:
	•	Авторизация под разными аккаунтами.
	•	Управление алгоритмами (триггеры, циклы, шаги с задержками).
	•	Отдельные команды (/timer, /second) для демонстрации асинхронной работы.
	•	SSH-клиент. Подключение и управление удалённым хостом в интерактивном режиме.
	•	Стресс-тест. Повторное выполнение заданной команды (CMD или PowerShell) множество раз, с опциональной многопоточностью.
	•	Сканирование портов (простая реализация “nmap”) — поиск открытых портов как из списка популярных, так и полный перебор от 1 до 65535.
	•	Система ключей. Некоторый функционал может быть ограничен в зависимости от ключа, прописанного в key.txt.

Зависимости

Для корректной работы требуются следующие Python-библиотеки (устанавливаются через pip):
	•	telethon (Telegram API)
	•	colorama (цветной вывод в консоли)
	•	paramiko (SSH-клиент)
	•	tqdm (прогресс-бар)
	•	concurrent.futures (обычно входит в стандартную библиотеку Python 3)
	•	logging (стандартная библиотека Python)
	•	asyncio (стандартная библиотека Python)
	•	и др. стандартные модули: json, os, sys, datetime, subprocess, threading, socket, importlib.

Пример установки:

pip install telethon colorama paramiko tqdm

Обратите внимание, что в коде также встречается модуль win32net (для NetGetAnyDCName), который относится к пакету pywin32. Если вы используете Windows, вам может потребоваться установить его отдельно:

pip install pywin32

Установка и запуск
	1.	Склонируйте репозиторий или скачайте файлы проекта.
	2.	Установите зависимости, перечисленные выше.
	3.	(Опционально) Убедитесь, что Python 3.7+ установлен в системе.
	4.	Запустите основной скрипт (где расположен код) командой:

python main.py

Или, если у вас несколько версий Python:

python3 main.py



При первом запуске, если потребуется, программа попросит ввести ключ (будет сохранён в key.txt) и API-данные для Telegram (api_credentials.txt).

Использование

После запуска вы увидите ASCII-баннер и меню:

=====================================================================================================================
 ___      ___       __       _______   ...
 ...
=====================================================================================================================
[0] Настроики	[1] Dump локальных user	[2] Dump /domain	[3] Stress Test	[4] Telegram Tool	[5] SSH клиент	[6] Скан портов
...
Введите ID функции для выполнения (или -1 для выхода):

В зависимости от выбранного пункта:
	•	0 — откроет «Настройки».
	•	1 — начать процесс dump локальных пользователей (сохранение списков пользователей в файлы).
	•	2 — начать процесс dump доменных пользователей. Может быть недоступен при ключе с тегом school.
	•	3 — запустить Stress Test (многократный запуск выбранной команды).
	•	4 — перейти в Telegram Tool (меню аккаунтов, алгоритмов и т.д.).
	•	5 — открыть SSH-клиент.
	•	6 — выполнить скан портов по списку популярных или полный перебор.

После выполнения каждой функции программа, как правило, возвращается в главное меню.

Описание функций

1. Настройки

На данный момент (в примере кода) функция «Настроики» (funcs().settings()) пустая. Можно расширять её по мере необходимости.

2. Dump локальных пользователей (local_user_dump)

Запускает сбор информации о локальных учётных записях Windows через команду net users.
	•	Результат (users.txt) сохраняется в папке local_users_list.
	•	Подробная информация о каждом пользователе (<user>.txt) сохраняется в папке local_info_list.

3. Dump доменных пользователей (domain_user_dump)

Подобно локальному dump, но с использованием net users /domain.
	•	Может быть недоступен при ключе с тегом school.
	•	Результаты сохраняются в list_user_domain и db_info_users_domain.

4. Stress Test (stress_test)

Позволяет задать команду и многократно её повторить (через cmd или powershell), с возможностью запуска в несколько потоков.
	•	Полезно для проверки производительности или стойкости системных ресурсов.

5. Telegram Tool (tg_tool)

Включает несколько подменю:
	•	Менеджер аккаунтов: хранится в accounts.json. Можно добавлять аккаунты, авторизоваться под ними (2FA поддерживается).
	•	Менеджер алгоритмов: хранится в algorithms.json. Настройка «шагов» для автоматического редактирования сообщения (например, «триггер-реакция»).
	•	Запуск всех алгоритмов: прослушивание исходящих сообщений в Telegram; если сообщение совпадает с trigger_text, то сообщение автоматически редактируется на заданные варианты в цикле.

Встроенные команды (в исходящем сообщении):
	•	/timer <сек> — запустить асинхронный таймер, который ответит после заданного количества секунд.
	•	/second — пример секундомера с периодической правкой одного сообщения.

6. SSH-клиент (sshmag)

Простейший интерактивный SSH-клиент на paramiko:
	•	Просит ввести host, port, username, password.
	•	Умеет выполнять команды, пока не будет введено exit/quit.

7. Скан портов (nmap)

Задача «простого nmap»:
	•	Сначала сканирует популярные порты (список из нескольких сотен).
	•	Затем при желании — полный перебор от 1 до 65535.
	•	Параллелизм достигается через ThreadPoolExecutor.
	•	Результаты отображаются в консоли, а процесс сопровождается прогресс-баром tqdm.

Telegram: Менеджер аккаунтов и алгоритмов

При запуске пункта «Telegram Tool» (tgmain) появляется главное меню:
	1.	Менеджер аккаунтов
	2.	Менеджер алгоритмов
	3.	Выход

Менеджер аккаунтов

Позволяет:
	•	Посмотреть список уже добавленных аккаунтов.
	•	Добавить новый аккаунт (ввести номер телефона, получить код авторизации, пройти 2FA).

Все данные о аккаунтах сохраняются в accounts.json.

Менеджер алгоритмов

Позволяет:
	•	Посмотреть уже существующие алгоритмы (из algorithms.json).
	•	Запустить сразу все.
	•	Создать новый алгоритм (триггер, количество циклов, шаги-редактирования).
	•	Редактировать/удалить алгоритм.

Если вы нажимаете «Запустить все алгоритмы», скрипт:
	1.	Спрашивает, под каким аккаунтом работать (можно выбрать из списка).
	2.	Авторизуется в Telegram-клиенте.
	3.	Слушает исходящие сообщения. Если текст сообщения совпадает с trigger_text одного из алгоритмов, автоматически запускаются все «шаги» по его редактированию (с задержками и заданным количеством циклов).

Ограничения
	1.	Требуется Windows для корректной работы dump функций, т.к. используются команды net user / net users /domain.
	2.	Наличие ключа (файл key.txt). При отсутствии или истёкшем сроке ключа программа завершается.
	•	Наличие тега school в ключе блокирует «domain_user_dump».
	3.	Для работы с Telegram нужны API_ID и API_HASH (файл api_credentials.txt).

Пример структуры проекта

magisky_tool/
├── main.py                  # Основной скрипт (menu, funcs и т.д.)
├── accounts.json            # Список Telegram-аккаунтов
├── algorithms.json          # Список алгоритмов
├── api_credentials.txt      # Данные API (API_ID, API_HASH)
├── key.txt                  # Ключ
├── local_users_list/        # Результаты Dump локальных пользователей
├── local_info_list/
├── list_user_domain/        # Результаты Dump доменных пользователей
├── db_info_users_domain/
├── app.log                  # Лог-файл
└── README.md                # Описание проекта

Лицензия

Проект распространяется под свободной лицензией (по выбору автора; при необходимости уточните детали).
Вы можете свободно модифицировать и использовать код в образовательных, коммерческих и иных целях.

Автор не несёт ответственности за некорректное или противозаконное использование данного инструмента.
